# MantisNXT Production Environment Configuration
# Copy to .env.local for development or .env.production for production

# ===========================================
# APPLICATION SETTINGS
# ===========================================
NODE_ENV=production
PORT=3000
HOST=localhost

# ===========================================
# DATABASE CONFIGURATION (Optimized)
# ===========================================
DB_HOST=62.169.20.53
DB_PORT=6600
DB_NAME=nxtprod-db_001
DB_USER=nxtdb_admin
DB_PASSWORD=P@33w0rd-1

# Connection Pool Settings (Conservative for Stability)
DB_POOL_MAX=12          # Maximum connections (reduced from 20)
DB_POOL_MIN=3           # Minimum connections (reduced from 5)

# Timeout Settings (Balanced for stability)
DB_POOL_CONNECTION_TIMEOUT=30000    # 30 seconds
DB_POOL_IDLE_TIMEOUT=300000         # 5 minutes
DB_POOL_ACQUIRE_TIMEOUT=45000       # 45 seconds

# Query Timeouts
DB_QUERY_TIMEOUT=120000             # 2 minutes max per query
DB_STATEMENT_TIMEOUT=90000          # 90 seconds max per statement

# ===========================================
# SYSTEM RESOURCE LIMITS
# ===========================================
# Development Server Management
MAX_NODE_PROCESSES=8                # Maximum Node.js processes allowed
MAX_MEMORY_MB=2048                  # Maximum memory usage (MB)
MAX_DEV_SERVERS=1                   # Maximum concurrent dev servers

# Circuit Breaker Settings
CIRCUIT_BREAKER_THRESHOLD=5         # Failure threshold
CIRCUIT_BREAKER_TIMEOUT=60000       # 60 second timeout

# Monitoring Settings
HEALTH_CHECK_INTERVAL=60000         # 1 minute health checks
RESOURCE_MONITOR_INTERVAL=30000     # 30 second resource monitoring

# ===========================================
# NEXT.JS CONFIGURATION
# ===========================================
NEXT_TELEMETRY_DISABLED=1          # Disable Next.js telemetry for performance
NEXT_PRIVATE_MINIMIZE_DEV_BUILD=1   # Minimize dev build for faster startup

# ===========================================
# LOGGING AND DEBUGGING
# ===========================================
LOG_LEVEL=info                      # Logging level (error, warn, info, debug)
DEBUG_DATABASE=false               # Enable detailed database logging
DEBUG_PERFORMANCE=false            # Enable performance metrics logging

# ===========================================
# SECURITY SETTINGS
# ===========================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=24h

# Session Settings
SESSION_SECRET=your-session-secret-change-in-production
SESSION_MAX_AGE=86400000           # 24 hours in milliseconds

# ===========================================
# EXTERNAL SERVICES
# ===========================================
# Email Configuration (Optional)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password

# Redis Configuration (Optional)
REDIS_URL=redis://localhost:6379

# ===========================================
# PERFORMANCE OPTIMIZATION
# ===========================================
# Enable production optimizations
OPTIMIZE_FONTS=true
OPTIMIZE_IMAGES=true
ENABLE_COMPRESSION=true

# Build optimizations
NEXT_PRIVATE_STANDALONE=true       # Enable standalone build
NEXT_BUNDLE_ANALYZER=false        # Disable bundle analyzer in production

# ===========================================
# DEPLOYMENT SETTINGS
# ===========================================
# Deployment target
DEPLOYMENT_TARGET=server           # Options: server, serverless, standalone

# Health check endpoints
HEALTH_CHECK_PATH=/api/health
DB_HEALTH_CHECK_PATH=/api/health/database

# ===========================================
# AI PROVIDER CONFIGURATION (Vercel AI SDK v5)
# ===========================================

# Default Provider Selection
DEFAULT_AI_PROVIDER=anthropic          # Options: anthropic, openai, vercel, openai-compatible
AI_FALLBACK_ORDER=anthropic,openai,vercel,openai-compatible

# Feature Toggles
ENABLE_AI_FEATURES=true
ENABLE_AI_STREAMING=true
ENABLE_AI_FALLBACK=true

# Global AI Settings
AI_MAX_TOKENS=8192
AI_TEMPERATURE=0.2
AI_REQUEST_TIMEOUT=30000               # 30 seconds

# ===========================================
# ANTHROPIC (CLAUDE) - PRIMARY PROVIDER
# ===========================================
ANTHROPIC_API_KEY=sk-ant-api03-...     # Get from: https://console.anthropic.com/
ANTHROPIC_BASE_URL=https://api.anthropic.com/v1  # Optional - only if using proxy

# Anthropic-specific settings
AI_ANTHROPIC_TIMEOUT_MS=30000
AI_ANTHROPIC_MAX_RETRIES=2
AI_ANTHROPIC_FALLBACK=openai,vercel

# ===========================================
# OPENAI (GPT-4) - ALTERNATIVE PROVIDER
# ===========================================
OPENAI_API_KEY=sk-...                  # Get from: https://platform.openai.com/api-keys
OPENAI_BASE_URL=https://api.openai.com/v1  # Optional
OPENAI_ORGANIZATION=org-...            # Optional
OPENAI_PROJECT=proj-...                # Optional

# OpenAI-specific settings
AI_OPENAI_TIMEOUT_MS=30000
AI_OPENAI_MAX_RETRIES=2
AI_OPENAI_FALLBACK=anthropic,vercel

# ===========================================
# VERCEL AI GATEWAY - ROUTING PROVIDER
# ===========================================
VERCEL_AI_GATEWAY_TOKEN=...            # Get from: https://vercel.com/dashboard
VERCEL_AI_GATEWAY_URL=https://gateway.vercel.com/v1

# Vercel-specific settings
AI_VERCEL_TIMEOUT_MS=30000
AI_VERCEL_MAX_RETRIES=2
AI_VERCEL_FALLBACK=openai,anthropic

# ===========================================
# OPENAI-COMPATIBLE - CUSTOM PROVIDER
# ===========================================
# For Groq, Together AI, Perplexity, local models, etc.
OPENAI_COMPATIBLE_API_KEY=...
OPENAI_COMPATIBLE_BASE_URL=https://api.groq.com/v1  # Example: Groq
OPENAI_COMPATIBLE_ORG=...              # Optional

# Compatible provider settings
AI_OPENAI_COMPATIBLE_TIMEOUT_MS=30000
AI_OPENAI_COMPATIBLE_MAX_RETRIES=2
AI_OPENAI_COMPATIBLE_FALLBACK=openai,vercel

# ===========================================
# AI ANALYTICS & MONITORING
# ===========================================
# Analytics Configuration
AI_ANALYTICS_ENABLED=true
AI_ANALYTICS_SAMPLE_RATE=1.0           # 1.0 = 100%, 0.1 = 10% sampling
AI_ANALYTICS_EVENT_NAME=ai.usage

# Health Monitoring
AI_MONITORING_ENABLED=true
AI_HEALTHCHECK_INTERVAL_MS=60000       # 1 minute
AI_UNHEALTHY_THRESHOLD=3               # Failures before unhealthy
AI_RECOVERY_WINDOW_MS=300000           # 5 minutes recovery window
AI_MONITOR_LATENCY=true

# ===========================================
# SECRET MANAGEMENT (OPTIONAL)
# ===========================================
# File-based secrets (alternative to environment variables)
# Useful for Docker/Kubernetes deployments
# ANTHROPIC_API_KEY_FILE=/run/secrets/anthropic_key
# OPENAI_API_KEY_FILE=/run/secrets/openai_key
# VERCEL_AI_GATEWAY_TOKEN_FILE=/run/secrets/vercel_token
# OPENAI_COMPATIBLE_API_KEY_FILE=/run/secrets/custom_key

# Secret directory (auto-discover secrets)
# AI_SECRETS_DIR=/run/secrets
# SECRETS_DIR=/run/secrets