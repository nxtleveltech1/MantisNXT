########################################
# MantisNXT Production Environment
# Neon PostgreSQL is the source of record
########################################

NODE_ENV=production
APP_PORT=3000
APP_URL=https://your-domain.example
BASE_URL=${APP_URL}

# Primary Neon database (all workloads)
DATABASE_URL=postgresql://<NEON_USER>:<NEON_PASSWORD>@<NEON_HOST>/<NEON_DATABASE>?sslmode=require
ENTERPRISE_DATABASE_URL=${DATABASE_URL}
NEON_SPP_DATABASE_URL=${DATABASE_URL}

# Optional explicit values for health checks / scripts
DB_HOST=<NEON_HOST>
DB_PORT=5432
DB_NAME=<NEON_DATABASE>
DB_USER=<NEON_USER>
DB_PASSWORD=<NEON_PASSWORD>
DB_SSL=true

# Pool sizing tuned for serverless Neon (adjust per workload)
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=120000
ENTERPRISE_DB_POOL_MAX=15
ENTERPRISE_DB_IDLE_TIMEOUT=30000
ENTERPRISE_DB_CONNECTION_TIMEOUT=120000

# Secrets (store in secret manager / deployment environment)
JWT_SECRET=replace_with_32_characters_minimum_secret
SESSION_SECRET=replace_with_32_characters_minimum_secret
ENCRYPTION_KEY=replace_with_32_characters_minimum_secret

# Feature flags
ENABLE_ANALYTICS=true
ENABLE_AUDIT_LOGGING=true
ENABLE_RATE_LIMITING=true
ENABLE_CACHING=true

# Logging / observability
LOG_LEVEL=info
LOG_FORMAT=json
SLOW_QUERY_THRESHOLD_MS=1000
METRICS_ENABLED=true
METRICS_PORT=9100

# Email (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@example.com
SMTP_PASSWORD=replace_me
EMAIL_FROM=noreply@example.com

# File uploads
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,application/pdf,text/csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

# Public URL for Next.js
NEXT_PUBLIC_APP_URL=${APP_URL}

# Real-time / caching
REDIS_URL=redis://:optional_password@redis:6379
REALTIME_ENABLED=true

# Performance
NODE_OPTIONS=--max-old-space-size=2048

########################################
# Copy this file to deployment secrets
# and replace placeholders before release.
########################################
